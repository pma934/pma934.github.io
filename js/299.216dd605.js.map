{"version":3,"file":"js/299.216dd605.js","mappings":"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","sources":["webpack://blog/./src/views/ArchiveContent.vue","webpack://blog/./src/components/ArchiveDirectory.vue","webpack://blog/./src/components/ArchiveDirectory.vue?33cc","webpack://blog/./src/libs/utils.js","webpack://blog/./src/components/Pikachu.vue","webpack://blog/./src/components/Pikachu.vue?7356","webpack://blog/./src/views/ArchiveContent.vue?90e1"],"sourcesContent":["<template>\r\n  <div class=\"archive-content-header\" :class=\"loading ? 'loading' : ''\">\r\n    <div class=\"header-wrap\">\r\n      <el-image class=\"img\" :src=\"img || loadingImg\" fit=\"cover\" loading=\"lazy\">\r\n        <template #placeholder>\r\n          <img class=\"img\" :src=\"loadingImg\" />\r\n        </template>\r\n      </el-image>\r\n      <header class=\"header-container\">\r\n        <div class=\"title\">\r\n          <div\r\n            ref=\"title-text\"\r\n            class=\"title-text\"\r\n            :class=\"titleScroll ? 'scroll' : ''\"\r\n          >\r\n            <span>{{ title }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <img class=\"avatar\" :src=\"avatar\" />\r\n        <div class=\"name-time-labels\">\r\n          <div class=\"name-time\">\r\n            <div class=\"name\">{{ name }}</div>\r\n            <div class=\"time\">{{ time }}</div>\r\n          </div>\r\n          <div class=\"labels\">\r\n            <template v-for=\"label in labels\" :key=\"label.name\">\r\n              <span>{{ label.name }}</span>\r\n            </template>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    </div>\r\n  </div>\r\n  <div class=\"archive-content\" :class=\"loading ? 'loading' : ''\">\r\n    <div class=\"markdown-body\">\r\n      <div ref=\"blog\" v-html=\"blogHtml\"></div>\r\n    </div>\r\n    <div class=\"end\">\r\n      <Pikachu />\r\n      <span class=\"text\">END!</span>\r\n    </div>\r\n    <div class=\"license markdown-body\" v-if=\"blog\">\r\n      <span\r\n        >原始链接：<a :href=\"blog.url\">{{ blog.url }}</a></span\r\n      >\r\n      <br />\r\n      <span\r\n        >许可协议：<a\r\n          href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh\"\r\n          >知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a\r\n        ></span\r\n      >\r\n    </div>\r\n  </div>\r\n  <div class=\"archive-content-footer\">\r\n    <div class=\"footer-wrap\">\r\n      <div\r\n        @click=\"$router.push(`/archive/${lastBlog.number}`)\"\r\n        class=\"router\"\r\n        v-if=\"lastBlog\"\r\n      >\r\n        <el-image\r\n          class=\"background\"\r\n          :src=\"lastBlog.img\"\r\n          fit=\"cover\"\r\n          loading=\"lazy\"\r\n          ><template #placeholder>\r\n            <img class=\"img\" :src=\"loadingImg\" />\r\n          </template>\r\n        </el-image>\r\n        <div class=\"text previous\">\r\n          <div class=\"previous-label\">previous</div>\r\n          <div class=\"previous-title\">{{ lastBlog.title }}</div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        @click=\"$router.push(`/archive/${nextBlog.number}`)\"\r\n        class=\"router\"\r\n        v-if=\"nextBlog\"\r\n      >\r\n        <el-image\r\n          class=\"background\"\r\n          :src=\"nextBlog.img\"\r\n          fit=\"cover\"\r\n          loading=\"lazy\"\r\n          ><template #placeholder>\r\n            <img class=\"img\" :src=\"loadingImg\" />\r\n          </template>\r\n        </el-image>\r\n        <div class=\"text next\">\r\n          <div class=\"next-label\">next</div>\r\n          <div class=\"next-title\">{{ nextBlog.title }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <ArchiveDirectory\r\n    :directory=\"directory\"\r\n    :active-id=\"activeId\"\r\n    class=\"directory\"\r\n    :class=\"loading ? 'loading' : ''\"\r\n    v-if=\"directoryNumber\"\r\n  ></ArchiveDirectory>\r\n</template>\r\n\r\n<script>\r\nimport { getBlog } from \"@/api/github\";\r\nimport BlogData from \"@/libs/blogClass\";\r\nimport ArchiveDirectory from \"@/components/ArchiveDirectory\";\r\nimport eventBus from \"@/libs/eventBus\";\r\nimport { getRealyOffsetTop } from \"@/libs/utils\";\r\nimport Pikachu from \"@/components/Pikachu\";\r\n\r\nexport default {\r\n  components: {\r\n    ArchiveDirectory,\r\n    Pikachu,\r\n  },\r\n  data() {\r\n    return {\r\n      // blog: null,\r\n      directory: null,\r\n      offsetTopList: [],\r\n      activeId: \"\",\r\n      loadingImg: new URL(`@/assets/img/loading.gif`, import.meta.url).href,\r\n      userData: null,\r\n      // childrenNumber: 0,\r\n      titleScroll: false,\r\n      getOffsetTopListIsDoing: true,\r\n      resize: 0,\r\n      loading: true, //页面加载中，完成后显示过渡效果\r\n      directoryNumber: 0,\r\n    };\r\n  },\r\n  props: {\r\n    number: {\r\n      type: String,\r\n      require: true,\r\n    },\r\n  },\r\n  computed: {\r\n    blog() {\r\n      return this.$store.getters.getBlogById(+this.number);\r\n    },\r\n    blogHtml() {\r\n      return this.blog?.blogHtml ?? \"\";\r\n    },\r\n    title() {\r\n      return this.blog?.title ?? \"\";\r\n    },\r\n    time() {\r\n      return this.blog?.time ?? \"\";\r\n    },\r\n    labels() {\r\n      return this.blog?.labels ?? [];\r\n    },\r\n    img() {\r\n      return this.blog?.img ?? \"\";\r\n    },\r\n    avatar() {\r\n      return this.userData?.avatar_url ?? \"\";\r\n    },\r\n    name() {\r\n      return this.userData?.name ?? \"\";\r\n    },\r\n    nextBlog() {\r\n      return this.blog ? this.$store.getters.getNextBlog(this.blog) : null;\r\n    },\r\n    lastBlog() {\r\n      return this.blog ? this.$store.getters.getLastBlog(this.blog) : null;\r\n    },\r\n  },\r\n  async created() {\r\n    this.$store.dispatch(\"checkUserData\").then((res) => {\r\n      if (res) {\r\n        this.userData = res;\r\n      }\r\n    });\r\n    await this.getBlog();\r\n    await this.getDirectory(); //生成目录\r\n    await this.getOffsetTopList(); // 获取每个目录的滚动距离\r\n    this.loading = false;\r\n    eventBus.on(\"scroll\", (scrollTop) => {\r\n      for (let obj of this.offsetTopList) {\r\n        if (+obj.offsetTop <= +scrollTop) {\r\n          this.activeId = obj.id;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    });\r\n  },\r\n  async mounted() {\r\n    await this.$nextTick();\r\n    const titleW = this.$refs[\"title-text\"].offsetWidth;\r\n    const titleBoxW = this.$refs[\"title-text\"].parentNode.offsetWidth;\r\n    if (titleW > titleBoxW) {\r\n      this.titleScroll = true;\r\n    }\r\n  },\r\n  updated() {\r\n    this.resize = this.$refs.blog.offsetHeight;\r\n  },\r\n  methods: {\r\n    async getBlog() {\r\n      if (!this.blog) {\r\n        const response = await getBlog({ number: this.number });\r\n        if (response?.data) {\r\n          const blog = new BlogData(response.data);\r\n          this.$store.commit(\"setBlogs\", [[+this.number, blog]]);\r\n        }\r\n      }\r\n    },\r\n    async getDirectory() {\r\n      let div = document.createElement(\"div\");\r\n      div.innerHTML = this.blog.blogHtml;\r\n      let directory = Array.from(div.children).filter((node) =>\r\n        [\"H2\", \"H3\"].includes(node.tagName)\r\n      );\r\n      this.directoryNumber = directory.length;\r\n      this.directory = directory\r\n        .map((node) => {\r\n          const id = node.getAttribute(\"id\");\r\n          const className = node.tagName === \"H2\" ? \"h2\" : \"h3\";\r\n          return `<a data-id=\"${id}\" class=\"${className}\">${id}</a>`;\r\n        })\r\n        .join(\"\");\r\n      div = null; //手动销毁\r\n      directory = null; //手动销毁\r\n    },\r\n    async getOffsetTopList() {\r\n      // console.log(\"getScrollHeightList\");\r\n      const offsetTopList = Array.from(this.$refs.blog.children)\r\n        .filter((node) => [\"H2\", \"H3\"].includes(node.tagName))\r\n        .map((node) => {\r\n          return {\r\n            id: node.id,\r\n            offsetTop:\r\n              getRealyOffsetTop(node) - 60 - this.$store.state.headerOffset, //减去scroll-padding-top\r\n          };\r\n        });\r\n      if (\r\n        JSON.stringify(this.offsetTopList) !== JSON.stringify(offsetTopList)\r\n      ) {\r\n        this.offsetTopList = offsetTopList;\r\n        this.getOffsetTopListIsDoing = true;\r\n        setTimeout(() => {\r\n          this.getOffsetTopList();\r\n        }, 333);\r\n      } else {\r\n        this.getOffsetTopListIsDoing = false;\r\n      }\r\n    },\r\n    beforeGetOffsetTopList() {\r\n      //防止getOffsetTopList重复运行\r\n      // console.log(\"beforeGetOffsetTopList\");\r\n      if (!this.getOffsetTopListIsDoing) {\r\n        // console.log(\"getOffsetTopList\");\r\n        this.getOffsetTopList();\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    resize() {\r\n      // console.log(\"resize\");\r\n      this.beforeGetOffsetTopList();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.archive-content {\r\n  position: relative;\r\n  // margin-top: 60px;\r\n  background-color: #fff;\r\n\r\n  padding-bottom: 24px;\r\n\r\n  .markdown-body {\r\n    // background-image: -webkit-linear-gradient(left, #fff0,#fffa 50%,#fff0);\r\n    // background-color: #fff;\r\n    max-width: 960px;\r\n    margin: 0 auto;\r\n    padding: 16px 4%;\r\n  }\r\n  &.loading {\r\n    opacity: 0;\r\n    transform: translateY(20px);\r\n  }\r\n  transition: all 0.5s ease-in-out;\r\n  opacity: 1;\r\n  transform: none;\r\n  .end {\r\n    width: 100%;\r\n    padding: 40px;\r\n    text-align: center;\r\n    span.text {\r\n      margin-top: 8px;\r\n      display: block;\r\n    }\r\n  }\r\n  .license {\r\n    border-bottom: 1px dashed #ddd;\r\n    border-top: 1px dashed #ddd;\r\n  }\r\n}\r\n.archive-content-header {\r\n  width: 100%;\r\n  padding-top: 40%;\r\n  position: relative;\r\n  .header-wrap {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    top: 0;\r\n    .img {\r\n      height: 100%;\r\n      width: 100%;\r\n      object-fit: cover;\r\n    }\r\n    .header-container {\r\n      @media (max-width: 450px) {\r\n        bottom: 0px;\r\n      }\r\n      max-width: 960px;\r\n      padding: 0 4%;\r\n      bottom: 20px;\r\n      position: absolute;\r\n      height: 100px;\r\n      width: 100%;\r\n      color: #fff;\r\n      text-shadow: 2px 2px 10px #000;\r\n      z-index: 1;\r\n\r\n      display: flex;\r\n      flex-direction: row;\r\n      flex-wrap: wrap;\r\n      .title {\r\n        height: 40px;\r\n        margin: 0;\r\n        font-size: 32px;\r\n        width: 100%;\r\n        color: #fff;\r\n        font-weight: 500;\r\n        overflow: hidden;\r\n        .title-text {\r\n          height: 40px;\r\n          white-space: nowrap;\r\n          display: inline-block;\r\n          &.scroll:hover {\r\n            animation: text-scroll 4s linear infinite;\r\n          }\r\n          span {\r\n            line-height: 40px;\r\n          }\r\n        }\r\n        @keyframes text-scroll {\r\n          0% {\r\n            transform: translateX(0);\r\n          }\r\n          100% {\r\n            transform: translateX(calc(480px - 100%));\r\n          }\r\n        }\r\n      }\r\n      .avatar {\r\n        height: 40px;\r\n        width: 40px;\r\n        border-radius: 50%;\r\n        border: 2px solid #fff;\r\n        box-shadow: 2px 2px 10px #000;\r\n        margin-right: 12px;\r\n      }\r\n      .name-time-labels {\r\n        display: flex;\r\n        flex-direction: column;\r\n        .name-time {\r\n          display: flex;\r\n          flex-direction: row;\r\n          align-items: center;\r\n          font-size: 16px;\r\n          height: 20px;\r\n          .name {\r\n            position: relative;\r\n            margin-right: 16px;\r\n            &::after {\r\n              content: \"·\";\r\n              font-size: 32px;\r\n              height: 20px;\r\n              width: 16px;\r\n              position: absolute;\r\n              line-height: 20px;\r\n              text-align: center;\r\n            }\r\n          }\r\n        }\r\n        .labels {\r\n          font-size: 16px;\r\n          height: 20px;\r\n          line-height: 20px;\r\n          span {\r\n            margin-right: 16px;\r\n          }\r\n          span:not(:last-child)::after {\r\n            content: \"·\";\r\n            font-size: 32px;\r\n            height: 20px;\r\n            width: 16px;\r\n            position: absolute;\r\n            line-height: 20px;\r\n            text-align: center;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  &.loading {\r\n    opacity: 0;\r\n    transform: translateY(-20px);\r\n  }\r\n  transition: all 0.5s ease-in-out;\r\n  opacity: 1;\r\n  transform: none;\r\n}\r\n\r\n.archive-content-footer {\r\n  width: 100%;\r\n  padding-top: 20%;\r\n  position: relative;\r\n  z-index: 0;\r\n\r\n  .footer-wrap {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    top: 0;\r\n    display: flex;\r\n    .router {\r\n      flex: 1 0 50%;\r\n      position: relative;\r\n      overflow: hidden;\r\n      .background {\r\n        transition: all 0.5s;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        height: 100%;\r\n        width: 100%;\r\n        z-index: 1;\r\n        .img {\r\n          height: 100%;\r\n          width: 100%;\r\n          object-fit: cover;\r\n        }\r\n      }\r\n      .text {\r\n        height: 100%;\r\n        width: 100%;\r\n        background: rgb(0 0 0 / 70%);\r\n        display: flex;\r\n        flex-direction: column;\r\n        position: absolute;\r\n        z-index: 2;\r\n        color: #fff;\r\n        align-items: flex-start;\r\n        justify-content: center;\r\n        padding: 0 10%;\r\n\r\n        &.previous {\r\n          align-items: flex-start;\r\n        }\r\n        &.next {\r\n          align-items: flex-end;\r\n        }\r\n        .previous-label,\r\n        .next-label {\r\n          text-transform: uppercase;\r\n          opacity: 0.7;\r\n          margin-bottom: 8px;\r\n        }\r\n        .previous-title,\r\n        .next-title {\r\n          width: 100%;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n        .next-title {\r\n          text-align: right;\r\n        }\r\n      }\r\n      &:hover {\r\n        .background {\r\n          transform: scale(1.1);\r\n        }\r\n        .text {\r\n          background: rgb(0 0 0 / 50%);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &.loading {\r\n    opacity: 0;\r\n    transform: translateY(20px);\r\n  }\r\n  transition: all 0.5s ease-in-out;\r\n  opacity: 1;\r\n  transform: none;\r\n}\r\n\r\n.directory {\r\n  &.loading {\r\n    opacity: 0;\r\n    transform: translateX(20px);\r\n  }\r\n  transition: all 0.5s ease-in-out;\r\n  opacity: 1;\r\n  transform: none;\r\n}\r\n</style>","<template>\r\n  <div class=\"markdown-directory\">\r\n    <div class=\"markdown-directory-content\">\r\n      <div class=\"title\">目录</div>\r\n      <el-scrollbar height=\"460\">\r\n        <div class=\"body\">\r\n          <div v-html=\"directory\" @click=\"tagTo\" ref=\"directory\"></div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectDom: null,\r\n    };\r\n  },\r\n  props: {\r\n    directory: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    activeId: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  methods: {\r\n    tagTo(event) {\r\n      //目录定位\r\n      const id = event.srcElement.dataset.id;\r\n      document.getElementById(id).scrollIntoView();\r\n      // document.getElementById(id).scrollIntoView({ behavior: \"smooth\" });\r\n    },\r\n    select(id) {\r\n      if (this.selectDom) {\r\n        this.selectDom.dataset.active = false;\r\n      }\r\n      //目录跟随\r\n      const selectDom = Array.from(this.$refs.directory.children).find(\r\n        (node) => node.dataset.id === id\r\n      );\r\n      // console.log(selectDom);\r\n\r\n      selectDom.dataset.active = true;\r\n      // selectDom.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n      selectDom.scrollIntoView({ block: \"center\" });\r\n      this.selectDom = selectDom;\r\n    },\r\n  },\r\n  watch: {\r\n    activeId(id) {\r\n      this.select(id);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.markdown-directory {\r\n  position: fixed;\r\n  top: calc(60px + 24px);\r\n  left: calc(50vw + 500px + 24px);\r\n  width: 300px;\r\n  height: 520px;\r\n  border-radius: 4px;\r\n  // background-color: var(--el-bg-color);\r\n  .markdown-directory-content {\r\n    height: 100%;\r\n    position: relative;\r\n    background-color: #fff;\r\n    // background-image: -webkit-linear-gradient(45deg, #fff0, #fffa 50%, #fff0);\r\n    border-radius: 4px;\r\n    padding: 0;\r\n    .title {\r\n      font-weight: 500;\r\n      padding: 20px 0;\r\n      margin: 0 24px;\r\n      font-size: 16px;\r\n      line-height: 20px;\r\n      color: #1d2129;\r\n      border-bottom: 1px solid #e4e6eb;\r\n      box-sizing: border-box;\r\n      height: 60px;\r\n    }\r\n    .body {\r\n      position: relative;\r\n      max-height: 460px;\r\n      div {\r\n        // padding-left: 16px;\r\n        font-size: 14px;\r\n        line-height: 20px;\r\n        width: 90%;\r\n        ::v-deep a {\r\n          cursor: pointer;\r\n          position: relative;\r\n          display: block;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          padding: 8px;\r\n          &[data-active=\"true\"] {\r\n            color: #1e80ff;\r\n            &::before {\r\n              content: \"\";\r\n              position: absolute;\r\n              top: 2px;\r\n              left: 0;\r\n              margin-top: 7px;\r\n              width: 4px;\r\n              height: 16px;\r\n              background: #1e80ff;\r\n              border-radius: 0 4px 4px 0;\r\n            }\r\n          }\r\n          &:hover {\r\n            background-color: #f7f8fa;\r\n            border-radius: 4px;\r\n          }\r\n          &.h2 {\r\n            padding-left: 24px;\r\n          }\r\n          &.h3 {\r\n            padding-left: 40px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n@media screen and (max-width: 1440px) {\r\n  .markdown-directory {\r\n    display: none;\r\n  }\r\n}\r\n</style>","import { render } from \"./ArchiveDirectory.vue?vue&type=template&id=0b16e839&scoped=true\"\nimport script from \"./ArchiveDirectory.vue?vue&type=script&lang=js\"\nexport * from \"./ArchiveDirectory.vue?vue&type=script&lang=js\"\n\nimport \"./ArchiveDirectory.vue?vue&type=style&index=0&id=0b16e839&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\zxz\\\\Desktop\\\\blog\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b16e839\"]])\n\nexport default __exports__","//节流装饰器\r\nexport const throttle = function (wait) {\r\n  return (target, name, descriptor) => {\r\n    const method = descriptor.value;\r\n    let flag = true;\r\n    descriptor.value = function (...args) {\r\n      if (flag) {\r\n        flag = false;\r\n        setTimeout(() => {\r\n          flag = true;\r\n        }, wait);\r\n        return method.apply(this, args);\r\n      }\r\n    };\r\n    return descriptor;\r\n  };\r\n};\r\n\r\n//防抖装饰器\r\nexport const debounce = function (wait) {\r\n  return (target, name, descriptor) => {\r\n    const method = descriptor.value;\r\n    let timer;\r\n    descriptor.value = function (...args) {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        return method.apply(this, args);\r\n      }, wait);\r\n    };\r\n    return descriptor;\r\n  };\r\n};\r\n\r\n//获取元素距离页面顶部的滚动距离\r\nexport const getRealyOffsetTop = function (el) {\r\n  if (el.offsetParent) {\r\n    return el.offsetTop + getRealyOffsetTop(el.offsetParent);\r\n  }\r\n  return el.offsetTop;\r\n};\r\n","<template>\r\n  <div class=\"pikachu\"></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"OneCat\",\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.pikachu {\r\n  position: relative;\r\n  margin: auto;\r\n  height: 80px;\r\n  width: 80px;\r\n\r\n  &::before {\r\n    content: \"\";\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    background-size: cover;\r\n    background-image: url(\"@/assets/img/025.png\");\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 2;\r\n    animation: before 10s linear infinite;\r\n  }\r\n  &::after {\r\n    content: \"\";\r\n    width: 40%;\r\n    height: 10%;\r\n    background: rgb(0 0 0 / 50%);\r\n    box-shadow: 0px 0px 10px 8px rgb(0 0 0 / 50%);\r\n    display: block;\r\n    position: absolute;\r\n    bottom: 10%;\r\n    left: 30%;\r\n    border-radius: 50%;\r\n    z-index: 1;\r\n    transform: scale(1);\r\n    animation: after 10s linear infinite;\r\n  }\r\n}\r\n@keyframes before {\r\n  0% {\r\n    transform: rotateY(0deg) translateY(-20px);\r\n    background-image: url(\"@/assets/img/025.png\");\r\n  }\r\n  1% {\r\n    transform: rotateY(0deg);\r\n    background-image: url(\"@/assets/img/025.png\");\r\n  }\r\n  12% {\r\n    transform: rotateY(90deg);\r\n    background-image: url(\"@/assets/img/025.png\");\r\n  }\r\n  13% {\r\n    transform: rotateY(90deg);\r\n    background-image: url(\"@/assets/img/025-ha.png\");\r\n  }\r\n  24% {\r\n    transform: rotateY(180deg);\r\n    background-image: url(\"@/assets/img/025-ha.png\");\r\n  }\r\n  25% {\r\n    transform: rotateY(180deg) translateY(-20px);\r\n    background-image: url(\"@/assets/img/025-ha.png\");\r\n  }\r\n  26% {\r\n    transform: rotateY(180deg);\r\n    background-image: url(\"@/assets/img/025-ha.png\");\r\n  }\r\n  37% {\r\n    transform: rotateY(270deg);\r\n    background-image: url(\"@/assets/img/025-ha.png\");\r\n  }\r\n  38% {\r\n    transform: rotateY(270deg);\r\n    background-image: url(\"@/assets/img/025-di.png\");\r\n  }\r\n  49% {\r\n    transform: rotateY(360deg);\r\n    background-image: url(\"@/assets/img/025-di.png\");\r\n  }\r\n  50% {\r\n    transform: rotateY(360deg) translateY(-20px);\r\n    background-image: url(\"@/assets/img/025-di.png\");\r\n  }\r\n  51% {\r\n    transform: rotateY(360deg);\r\n    background-image: url(\"@/assets/img/025-di.png\");\r\n  }\r\n  62% {\r\n    transform: rotateY(270deg);\r\n    background-image: url(\"@/assets/img/025-di.png\");\r\n  }\r\n  63% {\r\n    transform: rotateY(270deg);\r\n\r\n    background-image: url(\"@/assets/img/025-sm.png\");\r\n  }\r\n  74% {\r\n    transform: rotateY(180deg);\r\n    background-image: url(\"@/assets/img/025-sm.png\");\r\n  }\r\n  75% {\r\n    transform: rotateY(180deg) translateY(-20px);\r\n    background-image: url(\"@/assets/img/025-sm.png\");\r\n  }\r\n  76% {\r\n    transform: rotateY(180deg);\r\n    background-image: url(\"@/assets/img/025-sm.png\");\r\n  }\r\n  87% {\r\n    transform: rotateY(90deg);\r\n    background-image: url(\"@/assets/img/025-sm.png\");\r\n  }\r\n  88% {\r\n    transform: rotateY(90deg);\r\n    background-image: url(\"@/assets/img/025.png\");\r\n  }\r\n  98% {\r\n    transform: rotateY(0deg);\r\n    background-image: url(\"@/assets/img/025.png\");\r\n  }\r\n  100% {\r\n    transform: rotateY(0deg) translateY(-20px);\r\n    background-image: url(\"@/assets/img/025.png\");\r\n  }\r\n}\r\n@keyframes after {\r\n  0% {\r\n    transform: rotateY(0deg) scale(0.8);\r\n  }\r\n  1% {\r\n    transform: rotateY(0deg);\r\n  }\r\n  12% {\r\n    transform: rotateY(90deg);\r\n  }\r\n  13% {\r\n    transform: rotateY(90deg);\r\n  }\r\n  24% {\r\n    transform: rotateY(180deg);\r\n  }\r\n  25% {\r\n    transform: rotateY(180deg) scale(0.8);\r\n  }\r\n  26% {\r\n    transform: rotateY(180deg);\r\n  }\r\n  37% {\r\n    transform: rotateY(270deg);\r\n  }\r\n  38% {\r\n    transform: rotateY(270deg);\r\n  }\r\n  49% {\r\n    transform: rotateY(360deg);\r\n  }\r\n  50% {\r\n    transform: rotateY(360deg) scale(0.8);\r\n  }\r\n  51% {\r\n    transform: rotateY(360deg);\r\n  }\r\n  62% {\r\n    transform: rotateY(270deg);\r\n  }\r\n  63% {\r\n    transform: rotateY(270deg);\r\n  }\r\n  74% {\r\n    transform: rotateY(180deg);\r\n  }\r\n  75% {\r\n    transform: rotateY(180deg) scale(0.8);\r\n  }\r\n  76% {\r\n    transform: rotateY(180deg);\r\n  }\r\n  87% {\r\n    transform: rotateY(90deg);\r\n  }\r\n  88% {\r\n    transform: rotateY(90deg);\r\n  }\r\n  98% {\r\n    transform: rotateY(0deg);\r\n  }\r\n  100% {\r\n    transform: rotateY(0deg) scale(0.8);\r\n  }\r\n}\r\n</style>","import { render } from \"./Pikachu.vue?vue&type=template&id=222591f3&scoped=true\"\nimport script from \"./Pikachu.vue?vue&type=script&lang=js\"\nexport * from \"./Pikachu.vue?vue&type=script&lang=js\"\n\nimport \"./Pikachu.vue?vue&type=style&index=0&id=222591f3&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\zxz\\\\Desktop\\\\blog\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-222591f3\"]])\n\nexport default __exports__","import { render } from \"./ArchiveContent.vue?vue&type=template&id=0cdacb40&scoped=true\"\nimport script from \"./ArchiveContent.vue?vue&type=script&lang=js\"\nexport * from \"./ArchiveContent.vue?vue&type=script&lang=js\"\n\nimport \"./ArchiveContent.vue?vue&type=style&index=0&id=0cdacb40&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\zxz\\\\Desktop\\\\blog\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0cdacb40\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","href","_normalizeClass","$data","loading","_hoisted_1","_createVNode","_component_el_image","src","$options","img","loadingImg","fit","placeholder","_withCtx","_hoisted_3","_hoisted_4","ref","titleScroll","_toDisplayString","title","avatar","_hoisted_6","_hoisted_7","_hoisted_8","name","_hoisted_9","time","_hoisted_10","_createElementBlock","_Fragment","_renderList","labels","label","_hoisted_11","innerHTML","blogHtml","_hoisted_13","_component_Pikachu","_hoisted_14","blog","_hoisted_15","url","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","lastBlog","onClick","_cache","$event","_ctx","$router","push","number","_hoisted_22","_hoisted_23","_hoisted_24","nextBlog","_hoisted_26","_hoisted_27","_hoisted_28","directoryNumber","_createBlock","_component_ArchiveDirectory","directory","activeId","_hoisted_2","_component_el_scrollbar","height","$props","args","tagTo","data","selectDom","props","type","String","default","methods","event","id","srcElement","dataset","document","getElementById","scrollIntoView","select","this","active","Array","from","$refs","children","find","node","block","watch","__exports__","getRealyOffsetTop","el","offsetParent","offsetTop","components","ArchiveDirectory","Pikachu","offsetTopList","URL","userData","getOffsetTopListIsDoing","resize","require","computed","$store","getters","getBlogById","avatar_url","getNextBlog","getLastBlog","async","dispatch","then","res","getBlog","getDirectory","getOffsetTopList","eventBus","scrollTop","obj","$nextTick","titleW","offsetWidth","titleBoxW","parentNode","updated","offsetHeight","response","BlogData","commit","div","createElement","filter","includes","tagName","length","map","getAttribute","className","join","state","headerOffset","JSON","stringify","setTimeout","beforeGetOffsetTopList","render"],"sourceRoot":""}